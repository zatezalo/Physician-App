<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <!--<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"> -->
    <!-- Bootstrap core CSS -->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"> -->
    <!-- Material Design Bootstrap -->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet"> -->
</head>

<body>
   <%- include('../includes/navigation.ejs') %>
   
    <main>
        <div class="">
            <div class="">
                <h1 class="text-center">All visits</h1>
                <a class="btn btn-primary float-left mr-1" href="/schedule/add-visit">Add visit</a>
                <a class="btn btn-success float-left" href="/add-patient">Add patient</a>
            </div>
            <div class="table-responsive-md">
                <table class="table">
                    <table class="table"> 
                        <!-- <caption>List of users</caption> -->
                        <thead>
                          <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Patient ID</th>
                            <th scope="col">Patient name</th>
                            <th scope="col">Date of Birth</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Date of Visit</th>
                            <th scope="col">Time in</th>
                            <th scope="col">Time out</th>
                            <th scope="col">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                            <% for(let visit of visits) {%> 
                                <tr>
                                    <th scope="row"><%= visit._id %></th>
                                    <td><%= visit.patientId._id %></td>
                                    <td><%= visit.patientId.name %></td>
                                    <td><%=  visit.patientId.dateOfB.getDate() + ' ' + (visit.patientId.dateOfB.getMonth() + 1) + ' ' + visit.patientId.dateOfB.getUTCFullYear() %></td>
                                    <td><%= visit.patientId.gender %></td>
                                    <td><%= visit.visitDate.toDateString() %></td>
                                    <td><%= visit.timeIn %></td>
                                    <td><%= visit.timeOut %></td>
                                    <td class="">
                                        <a href="/schedule/enter-visit/<%= visit._id %>" class="btn btn-primary text-light "><i class="far fa-eye"></i></a>
                                        <a href="/schedule/edit-visit/<%= visit._id %>" class="btn btn-success text-light "><i class="fas fa-edit"></i></a>
                                        <a href="" class="btn btn-danger text-light "><i class="far fa-trash-alt"></i></a>
                                    </td>
                                </tr>
                            <% } %> 
                      </table>
                </table>
              </div>
        </div>
    </main>


<!-- JQuery -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
<%- include('../includes/end.ejs') %>